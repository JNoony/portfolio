{"version":3,"file":"lazyloaded.js","sources":["../src/consts.ts","../src/utils.ts","../src/AutoSizer.ts","../src/LazyLoaded.ts"],"sourcesContent":["const isWindow = typeof window !== \"undefined\";\nconst ua = isWindow ? window.navigator.userAgent : \"\";\nexport const SUPPORT_COMPUTEDSTYLE = isWindow ? !!(\"getComputedStyle\" in window) : false;\nexport const IS_IE = /MSIE|Trident|Windows Phone|Edge/.test(ua);\nexport const SUPPORT_ADDEVENTLISTENER = isWindow ? !!(\"addEventListener\" in document) : false;\nexport const WIDTH = \"width\";\nexport const HEIGHT = \"height\";\n","import { ArrayFormat, InnerSizeType, ClientSizeType, ScrollSizeType, OffsetSizeType } from \"./types\";\n\nimport { SUPPORT_ADDEVENTLISTENER, SUPPORT_COMPUTEDSTYLE } from \"./consts\";\n\nexport function getAttribute(el: HTMLElement, name: string) {\n  return el.getAttribute(name) || \"\";\n}\n\nexport function toArray<T>(arr: ArrayFormat<T>): T[] {\n  return [].slice.call(arr);\n}\nexport function isDataAttribute(target: HTMLElement, prefix: string = \"data-\"): boolean {\n  return !!target.getAttribute(`${prefix}width`);\n}\nexport function addEvent(\n  element: Element | Window,\n  type: string,\n  handler: (...args: any[]) => void,\n) {\n  if (SUPPORT_ADDEVENTLISTENER) {\n    element.addEventListener(type, handler, false);\n  } else if ((element as any).attachEvent) {\n    (element as any).attachEvent(`on${type}`, handler);\n  } else {\n    (element as any)[`on${type}`] = handler;\n  }\n}\nexport function removeEvent(\n  element: Element | Window,\n  type: string,\n  handler: (...args: any[]) => void,\n) {\n  if (element.removeEventListener) {\n    element.removeEventListener(type, handler, false);\n  } else if ((element as any).detachEvent) {\n    (element as any).detachEvent(`on${type}`, handler);\n  } else {\n    (element as any)[`on${type}`] = null;\n  }\n}\n\nexport function innerWidth(el: HTMLElement) {\n  return getSize(el, \"Width\");\n}\nexport function innerHeight(el: HTMLElement) {\n  return getSize(el, \"Height\");\n}\nexport function getStyles(el: Element) {\n  return (SUPPORT_COMPUTEDSTYLE ?\n    window.getComputedStyle(el) : (el as any).currentStyle) || {};\n}\nfunction getSize(el: HTMLElement, name: \"Width\" | \"Height\") {\n  const size = el[`client${name}` as ClientSizeType] || el[`offset${name}` as OffsetSizeType];\n\n  return parseFloat(size || getStyles(el)[name.toLowerCase()]) || 0;\n}\n","import { addEvent, removeEvent, innerWidth, innerHeight, getAttribute } from \"./utils\";\nimport { WIDTH, HEIGHT } from \"./consts\";\nimport { AutoSizerElement } from \"./types\";\n\nconst elements: AutoSizerElement[] = [];\n\nexport function add(element: AutoSizerElement, prefix: string) {\n  !elements.length && addEvent(window, \"resize\", resizeAll);\n  element.__PREFIX__ = prefix;\n  elements.push(element);\n  resize(element);\n}\nexport function remove(element: AutoSizerElement, prefix: string) {\n  const index = elements.indexOf(element);\n\n  if (index < 0) {\n    return;\n  }\n  const fixed = getAttribute(element, `${prefix}fixed`);\n\n  delete element.__PREFIX__;\n  element.style[fixed === HEIGHT ? WIDTH : HEIGHT] = \"\";\n  elements.splice(index, 1);\n  !elements.length && removeEvent(window, \"resize\", resizeAll);\n}\nfunction resize(element: AutoSizerElement, prefix = \"data-\") {\n  let elementPrefix = element.__PREFIX__;\n\n  if (typeof elementPrefix !== \"string\") {\n    elementPrefix = prefix;\n  }\n  const dataWidth = parseInt(getAttribute(element, `${elementPrefix}${WIDTH}`), 10) || 0;\n  const dataHeight = parseInt(getAttribute(element, `${elementPrefix}${HEIGHT}`), 10) || 0;\n  const fixed = getAttribute(element, `${elementPrefix}fixed`);\n\n  if (fixed === HEIGHT) {\n    const size = innerHeight(element) || dataHeight;\n\n    element.style[WIDTH] = `${dataWidth / dataHeight * size}px`;\n  } else {\n    const size = innerWidth(element) || dataWidth;\n\n    element.style[HEIGHT] = `${dataHeight / dataWidth * size}px`;\n  }\n}\nexport function resizeAll() {\n  elements.forEach(element => {\n    resize(element);\n  });\n}\n","import { IS_IE } from \"./consts\";\nimport Component from \"@egjs/component\";\nimport { toArray, isDataAttribute, removeEvent, addEvent } from \"./utils\";\nimport { remove as removeAutoSizer, add as addAutoSizer } from \"./AutoSizer\";\n\n/**\n * @namespace eg.LazyLoaded\n */\n/**\n * This module is used to wait for images or videos to load.\n * @ko 이 모듈은 이미지 또는 비디오 로딩을 대기할 수 있습니다.\n * @memberof eg.LazyLoaded\n * @param -\n * @example\n * ## HTML\n * ```html\n * <div>\n *    <img src=\"./1.jpg\" data-width=\"1280\" data-height=\"853\" style=\"width:100%\"/>\n *    <img src=\"./2.jpg\">\n *    <img src=\"./3.jpg\">\n *    <img src=\"./4.jpg\">\n *    <img src=\"ERR\">\n *    <img src=\"./6.jpg\">\n *    <img src=\"./7.jpg\">\n *    <img src=\"ERR\">\n * </div>\n * ```\n * ## Javascript\n * ```js\n * import {check} from \"@egjs/lazyloaded\";\n *\n * eg.LazyLoaded.check([document.querySelector(\"div\")]).on({\n *   ready: () => console.log(\"ready\"),\n *   finish: () => console.log(\"finish\"),\n *   error: e => console.log(\"error\", e),\n * });\n * ```\n */\nexport function check(\n  elements: HTMLElement[],\n  prefix: string = \"data-\",\n): Component {\n  const component = new Component();\n  let finishCount = 0;\n  let readyCount = 0;\n\n  function checkReady() {\n    if (--readyCount !== 0) {\n      return;\n    }\n    /**\n     * An event occurs when the size of all images is available.\n     * @ko 모든 이미지의 사이즈를 구할 수 있는 상태가 된 경우 이벤트가 발생한다.\n     * @event eg.LazyLoaded#ready\n     * @example\n     * ```html\n     * <div>\n     *    <img src=\"./1.jpg\" data-width=\"1280\" data-height=\"853\" style=\"width:100%\"/>\n     *    <img src=\"./2.jpg\"/>\n     *    <img src=\"ERR\"/>\n     * </div>\n     * ```\n     * ## Javascript\n     * ```js\n     * import {check} from \"@egjs/lazyloaded\";\n     *\n     * eg.LazyLoaded.check([document.querySelector(\"div\")]).on({\n     *   ready: () => console.log(\"ready\"),\n     * });\n     * ```\n     */\n    component.trigger(\"ready\");\n  }\n  function checkFinish() {\n    if (--finishCount !== 0) {\n      return;\n    }\n    /**\n     * An event occurs when all images have been completed loading.\n     * @ko 모든 이미지가 로딩이 완료된 상태가 된 경우 이벤트가 발생한다.\n     * @event eg.LazyLoaded#finish\n     * @example\n     * ```html\n     * <div>\n     *    <img src=\"./1.jpg\" data-width=\"1280\" data-height=\"853\" style=\"width:100%\"/>\n     *    <img src=\"./2.jpg\"/>\n     *    <img src=\"ERR\"/>\n     * </div>\n     * ```\n     * ## Javascript\n     * ```js\n     * import {check} from \"@egjs/lazyloaded\";\n     *\n     * eg.LazyLoaded.check([document.querySelector(\"div\")]).on({\n     *   finish: () => console.log(\"finish\"),\n     * });\n     * ```\n     */\n    component.trigger(\"finish\");\n  }\n  elements.forEach((el, i) => {\n    const tagName = el.tagName;\n\n    if (isDataAttribute(el, prefix) && tagName !== \"IMG\") {\n      addAutoSizer(el, prefix);\n      ++finishCount;\n      setTimeout(() => {\n        check(toArray(el.querySelectorAll(\"img\")), prefix).on(\"finish\", () => {\n          removeAutoSizer(el, prefix);\n          checkFinish();\n        });\n      });\n      return;\n    }\n    const images = tagName === \"IMG\" ? [el as HTMLImageElement] : toArray(el.querySelectorAll(\"img\"));\n\n    if (!images.length) {\n      return;\n    }\n    images.forEach((img, j) => {\n      if (img.complete && (!IS_IE || (IS_IE && img.naturalWidth))) {\n        if (!img.naturalWidth) {\n          setTimeout(() => {\n            component.trigger(\"error\", {\n              itemTarget: el,\n              itemIndex: i,\n              target: img,\n              index: j,\n            });\n          });\n        }\n        return;\n      }\n      if (isDataAttribute(img, prefix)) {\n        addAutoSizer(img, prefix);\n      } else {\n        ++readyCount;\n      }\n      ++finishCount;\n\n      function onError() {\n        /**\n         * An event occurs if the image fails to load.\n         * @ko 이미지가 로딩에 실패하면 이벤트가 발생한다.\n         * @event eg.LazyLoaded#error\n         * @param {object} e - The object of data to be sent to an event <ko>이벤트에 전달되는 데이터 객체</ko>\n         * @param {HTMLElement} [e.itemTarget] - The item's element with error images.<ko>오류난 이미지가 있는 아이템의 엘리먼트</ko>\n         * @param {number} [e.itemindex] - The item's index with error images. <ko>오류난 이미지가 있는 아이템의 인덱스</ko>\n         * @param {HTMLElement} [e.target] - Error image element <ko>오류난 이미지 엘리먼트</ko>\n         * @param {number} [e.index] - Error image index <ko>오류난 이미지의 인덱스</ko>\n         * @example\n         * ```html\n         * <div>\n         *    <img src=\"./1.jpg\" data-width=\"1280\" data-height=\"853\" style=\"width:100%\"/>\n         *    <img src=\"./2.jpg\"/>\n         *    <img src=\"ERR\"/>\n         * </div>\n         * ```\n         * ## Javascript\n         * ```js\n         * import {check} from \"@egjs/lazyloaded\";\n         *\n         * eg.LazyLoaded.check([document.querySelector(\"div\")]).on({\n         *   error: e => {\n         *     // <div>...</div>, 0, <img src=\"ERR\"/>, 2\n         *     console.log(e.itemTarget, e.itemIndex, e.target, e.index),\n         *   },\n         * });\n         * ```\n         */\n        component.trigger(\"error\", {\n          itemTarget: el,\n          itemIndex: i,\n          target: img,\n          index: j,\n        });\n      }\n      function onCheck(e: Event) {\n        const target = (e.target || e.srcElement) as HTMLImageElement;\n\n        removeEvent(target, \"error\", onCheck);\n        removeEvent(target, \"load\", onCheck);\n\n        if (isDataAttribute(target, prefix)) {\n          removeAutoSizer(target, prefix);\n        } else {\n          checkReady();\n        }\n        if (e.type === \"error\") {\n          onError();\n        }\n        checkFinish();\n      }\n      addEvent(img, \"load\", onCheck);\n      addEvent(img, \"error\", onCheck);\n\n      IS_IE && img.setAttribute(\"src\", img.getAttribute(\"src\") as string);\n    });\n  });\n\n  !readyCount && setTimeout(() => {\n    component.trigger(\"ready\");\n  });\n\n  !finishCount && setTimeout(() => {\n    component.trigger(\"finish\");\n  });\n\n  return component;\n}\n\n\n/**\n * Remove the element that was registered in AutoSizer.\n * @ko AutoSizer에 등록됐던 엘리먼트를 제거 한다.\n * @memberof eg.LazyLoaded\n * @function removeAutoSizer\n * @param {HTMLElement} element - Element to be removed\n * @param {string} prefix - data prefix of element to be removed\n * @example\n * ## HTML\n * ```html\n * <div>\n *    <img src=\"./1.jpg\" data-width=\"1280\" data-height=\"853\" style=\"width:100%\"/>\n * </div>\n * ```\n * ## Javascript\n * ```js\n * import { removeAutoSizer } from \"@egjs/lazyloaded\";\n *\n * if (target.getAttribute(\"data-width\")) {\n *   removeAutoSizer(target, \"data-\");\n * }\n * ```\n */\nexport { removeAutoSizer };\n"],"names":["isWindow","window","ua","navigator","userAgent","SUPPORT_COMPUTEDSTYLE","IS_IE","test","SUPPORT_ADDEVENTLISTENER","document","WIDTH","HEIGHT","el","name","getAttribute","arr","slice","call","target","prefix","element","type","handler","addEventListener","attachEvent","removeEventListener","detachEvent","getSize","getComputedStyle","currentStyle","size","parseFloat","getStyles","toLowerCase","elements","length","addEvent","resizeAll","__PREFIX__","push","resize","index","indexOf","fixed","style","splice","removeEvent","elementPrefix","dataWidth","parseInt","dataHeight","innerHeight","innerWidth","forEach","component","Component","finishCount","readyCount","trigger","i","tagName","isDataAttribute","addAutoSizer","setTimeout","check","toArray","querySelectorAll","on","removeAutoSizer","checkFinish","images","img","j","complete","naturalWidth","itemTarget","itemIndex","e","srcElement","onCheck","checkReady","onError","setAttribute"],"mappings":";;;;;;;;;;;;;;EAAA,IAAMA,QAAQ,GAAG,OAAOC,MAAP,KAAkB,WAAnC;EACA,IAAMC,EAAE,GAAGF,QAAQ,GAAGC,MAAM,CAACE,SAAP,CAAiBC,SAApB,GAAgC,EAAnD;AACA,EAAO,IAAMC,qBAAqB,GAAGL,QAAQ,GAAG,CAAC,EAAE,sBAAsBC,MAAxB,CAAJ,GAAsC,KAA5E;AACP,EAAO,IAAMK,KAAK,GAAG,kCAAkCC,IAAlC,CAAuCL,EAAvC,CAAd;AACP,EAAO,IAAMM,wBAAwB,GAAGR,QAAQ,GAAG,CAAC,EAAE,sBAAsBS,QAAxB,CAAJ,GAAwC,KAAjF;AACP,EAAO,IAAMC,KAAK,GAAG,OAAd;AACP,EAAO,IAAMC,MAAM,GAAG,QAAf;;wBCFsBC,IAAiBC;EAC5C,SAAOD,EAAE,CAACE,YAAH,CAAgBD,IAAhB,KAAyB,EAAhC;EACD;AAED,mBAA2BE;EACzB,SAAO,GAAGC,KAAH,CAASC,IAAT,CAAcF,GAAd,CAAP;EACD;AACD,2BAAgCG,QAAqBC;EAAA,uBAAA,EAAA;EAAAA,IAAAA,gBAAA;;;EACnD,SAAO,CAAC,CAACD,MAAM,CAACJ,YAAP,CAAuBK,MAAM,UAA7B,CAAT;EACD;AACD,oBACEC,SACAC,MACAC;EAEA,MAAId,wBAAJ,EAA8B;EAC5BY,IAAAA,OAAO,CAACG,gBAAR,CAAyBF,IAAzB,EAA+BC,OAA/B,EAAwC,KAAxC;EACD,GAFD,MAEO,IAAKF,OAAe,CAACI,WAArB,EAAkC;EACtCJ,IAAAA,OAAe,CAACI,WAAhB,CAA4B,OAAKH,IAAjC,EAAyCC,OAAzC;EACF,GAFM,MAEA;EACJF,IAAAA,OAAe,CAAC,OAAKC,IAAN,CAAf,GAA+BC,OAA/B;EACF;EACF;AACD,uBACEF,SACAC,MACAC;EAEA,MAAIF,OAAO,CAACK,mBAAZ,EAAiC;EAC/BL,IAAAA,OAAO,CAACK,mBAAR,CAA4BJ,IAA5B,EAAkCC,OAAlC,EAA2C,KAA3C;EACD,GAFD,MAEO,IAAKF,OAAe,CAACM,WAArB,EAAkC;EACtCN,IAAAA,OAAe,CAACM,WAAhB,CAA4B,OAAKL,IAAjC,EAAyCC,OAAzC;EACF,GAFM,MAEA;EACJF,IAAAA,OAAe,CAAC,OAAKC,IAAN,CAAf,GAA+B,IAA/B;EACF;EACF;AAED,sBAA2BT;EACzB,SAAOe,OAAO,CAACf,EAAD,EAAK,OAAL,CAAd;EACD;AACD,uBAA4BA;EAC1B,SAAOe,OAAO,CAACf,EAAD,EAAK,QAAL,CAAd;EACD;AACD,qBAA0BA;EACxB,SAAO,CAACP,qBAAqB,GAC3BJ,MAAM,CAAC2B,gBAAP,CAAwBhB,EAAxB,CAD2B,GACIA,EAAU,CAACiB,YADrC,KACsD,EAD7D;EAED;;EACD,gBAAA,CAAiBjB,EAAjB,EAAkCC,IAAlC;EACE,MAAMiB,IAAI,GAAGlB,EAAE,CAAC,WAASC,IAAV,CAAF,IAAyCD,EAAE,CAAC,WAASC,IAAV,CAAxD;EAEA,SAAOkB,UAAU,CAACD,IAAI,IAAIE,SAAS,CAACpB,EAAD,CAAT,CAAcC,IAAI,CAACoB,WAAL,EAAd,CAAT,CAAV,IAAyD,CAAhE;EACD;;ECnDD,IAAMC,QAAQ,GAAuB,EAArC;AAEA,eAAoBd,SAA2BD;EAC7C,GAACe,QAAQ,CAACC,MAAV,IAAoBC,QAAQ,CAACnC,MAAD,EAAS,QAAT,EAAmBoC,SAAnB,CAA5B;EACAjB,EAAAA,OAAO,CAACkB,UAAR,GAAqBnB,MAArB;EACAe,EAAAA,QAAQ,CAACK,IAAT,CAAcnB,OAAd;EACAoB,EAAAA,MAAM,CAACpB,OAAD,CAAN;EACD;AACD,kBAAuBA,SAA2BD;EAChD,MAAMsB,KAAK,GAAGP,QAAQ,CAACQ,OAAT,CAAiBtB,OAAjB,CAAd;;EAEA,MAAIqB,KAAK,GAAG,CAAZ,EAAe;EACb;EACD;;EACD,MAAME,KAAK,GAAG7B,YAAY,CAACM,OAAD,EAAaD,MAAM,UAAnB,CAA1B;EAEA,SAAOC,OAAO,CAACkB,UAAf;EACAlB,EAAAA,OAAO,CAACwB,KAAR,CAAcD,KAAK,KAAKhC,MAAV,GAAmBD,KAAnB,GAA2BC,MAAzC,IAAmD,EAAnD;EACAuB,EAAAA,QAAQ,CAACW,MAAT,CAAgBJ,KAAhB,EAAuB,CAAvB;EACA,GAACP,QAAQ,CAACC,MAAV,IAAoBW,WAAW,CAAC7C,MAAD,EAAS,QAAT,EAAmBoC,SAAnB,CAA/B;EACD;;EACD,eAAA,CAAgBjB,OAAhB,EAA2CD,MAA3C;EAA2C,uBAAA,EAAA;EAAAA,IAAAA,gBAAA;;;EACzC,MAAI4B,aAAa,GAAG3B,OAAO,CAACkB,UAA5B;;EAEA,MAAI,OAAOS,aAAP,KAAyB,QAA7B,EAAuC;EACrCA,IAAAA,aAAa,GAAG5B,MAAhB;EACD;;EACD,MAAM6B,SAAS,GAAGC,QAAQ,CAACnC,YAAY,CAACM,OAAD,EAAU,KAAG2B,aAAH,GAAmBrC,KAA7B,CAAb,EAAoD,EAApD,CAAR,IAAmE,CAArF;EACA,MAAMwC,UAAU,GAAGD,QAAQ,CAACnC,YAAY,CAACM,OAAD,EAAU,KAAG2B,aAAH,GAAmBpC,MAA7B,CAAb,EAAqD,EAArD,CAAR,IAAoE,CAAvF;EACA,MAAMgC,KAAK,GAAG7B,YAAY,CAACM,OAAD,EAAa2B,aAAa,UAA1B,CAA1B;;EAEA,MAAIJ,KAAK,KAAKhC,MAAd,EAAsB;EACpB,QAAMmB,IAAI,GAAGqB,WAAW,CAAC/B,OAAD,CAAX,IAAwB8B,UAArC;EAEA9B,IAAAA,OAAO,CAACwB,KAAR,CAAclC,KAAd,IAA0BsC,SAAS,GAAGE,UAAZ,GAAyBpB,IAAzB,OAA1B;EACD,GAJD,MAIO;EACL,QAAMA,IAAI,GAAGsB,UAAU,CAAChC,OAAD,CAAV,IAAuB4B,SAApC;EAEA5B,IAAAA,OAAO,CAACwB,KAAR,CAAcjC,MAAd,IAA2BuC,UAAU,GAAGF,SAAb,GAAyBlB,IAAzB,OAA3B;EACD;EACF;;AACD;EACEI,EAAAA,QAAQ,CAACmB,OAAT,CAAiB,UAAAjC,OAAA;EACfoB,IAAAA,MAAM,CAACpB,OAAD,CAAN;EACD,GAFD;EAGD;;EC5CD;;;;EAGA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8BA,iBACEc,UACAf;EAAA,uBAAA,EAAA;EAAAA,IAAAA,gBAAA;;;EAEA,MAAMmC,SAAS,GAAG,IAAIC,SAAJ,EAAlB;EACA,MAAIC,WAAW,GAAG,CAAlB;EACA,MAAIC,UAAU,GAAG,CAAjB;;EAEA,qBAAA;EACE,QAAI,EAAEA,UAAF,KAAiB,CAArB,EAAwB;EACtB;EACD;EACD;;;;;;;;;;;;;;;;;;;;;;;EAqBAH,IAAAA,SAAS,CAACI,OAAV,CAAkB,OAAlB;EACD;;EACD,sBAAA;EACE,QAAI,EAAEF,WAAF,KAAkB,CAAtB,EAAyB;EACvB;EACD;EACD;;;;;;;;;;;;;;;;;;;;;;;EAqBAF,IAAAA,SAAS,CAACI,OAAV,CAAkB,QAAlB;EACD;;EACDxB,EAAAA,QAAQ,CAACmB,OAAT,CAAiB,UAACzC,EAAD,EAAK+C,CAAL;EACf,QAAMC,OAAO,GAAGhD,EAAE,CAACgD,OAAnB;;EAEA,QAAIC,eAAe,CAACjD,EAAD,EAAKO,MAAL,CAAf,IAA+ByC,OAAO,KAAK,KAA/C,EAAsD;EACpDE,MAAAA,GAAY,CAAClD,EAAD,EAAKO,MAAL,CAAZ;EACA,QAAEqC,WAAF;EACAO,MAAAA,UAAU,CAAC;EACTC,QAAAA,KAAK,CAACC,OAAO,CAACrD,EAAE,CAACsD,gBAAH,CAAoB,KAApB,CAAD,CAAR,EAAsC/C,MAAtC,CAAL,CAAmDgD,EAAnD,CAAsD,QAAtD,EAAgE;EAC9DC,UAAAA,MAAe,CAACxD,EAAD,EAAKO,MAAL,CAAf;EACAkD,UAAAA,WAAW;EACZ,SAHD;EAID,OALS,CAAV;EAMA;EACD;;EACD,QAAMC,MAAM,GAAGV,OAAO,KAAK,KAAZ,GAAoB,CAAChD,EAAD,CAApB,GAA+CqD,OAAO,CAACrD,EAAE,CAACsD,gBAAH,CAAoB,KAApB,CAAD,CAArE;;EAEA,QAAI,CAACI,MAAM,CAACnC,MAAZ,EAAoB;EAClB;EACD;;EACDmC,IAAAA,MAAM,CAACjB,OAAP,CAAe,UAACkB,GAAD,EAAMC,CAAN;EACb,UAAID,GAAG,CAACE,QAAJ,KAAiB,CAACnE,KAAD,IAAWA,KAAK,IAAIiE,GAAG,CAACG,YAAzC,CAAJ,EAA6D;EAC3D,YAAI,CAACH,GAAG,CAACG,YAAT,EAAuB;EACrBX,UAAAA,UAAU,CAAC;EACTT,YAAAA,SAAS,CAACI,OAAV,CAAkB,OAAlB,EAA2B;EACzBiB,cAAAA,UAAU,EAAE/D,EADa;EAEzBgE,cAAAA,SAAS,EAAEjB,CAFc;EAGzBzC,cAAAA,MAAM,EAAEqD,GAHiB;EAIzB9B,cAAAA,KAAK,EAAE+B;EAJkB,aAA3B;EAMD,WAPS,CAAV;EAQD;;EACD;EACD;;EACD,UAAIX,eAAe,CAACU,GAAD,EAAMpD,MAAN,CAAnB,EAAkC;EAChC2C,QAAAA,GAAY,CAACS,GAAD,EAAMpD,MAAN,CAAZ;EACD,OAFD,MAEO;EACL,UAAEsC,UAAF;EACD;;EACD,QAAED,WAAF;;EAEA,sBAAA;EACE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;EA6BAF,QAAAA,SAAS,CAACI,OAAV,CAAkB,OAAlB,EAA2B;EACzBiB,UAAAA,UAAU,EAAE/D,EADa;EAEzBgE,UAAAA,SAAS,EAAEjB,CAFc;EAGzBzC,UAAAA,MAAM,EAAEqD,GAHiB;EAIzB9B,UAAAA,KAAK,EAAE+B;EAJkB,SAA3B;EAMD;;EACD,sBAAA,CAAiBK,CAAjB;EACE,YAAM3D,MAAM,GAAI2D,CAAC,CAAC3D,MAAF,IAAY2D,CAAC,CAACC,UAA9B;EAEAhC,QAAAA,WAAW,CAAC5B,MAAD,EAAS,OAAT,EAAkB6D,OAAlB,CAAX;EACAjC,QAAAA,WAAW,CAAC5B,MAAD,EAAS,MAAT,EAAiB6D,OAAjB,CAAX;;EAEA,YAAIlB,eAAe,CAAC3C,MAAD,EAASC,MAAT,CAAnB,EAAqC;EACnCiD,UAAAA,MAAe,CAAClD,MAAD,EAASC,MAAT,CAAf;EACD,SAFD,MAEO;EACL6D,UAAAA,UAAU;EACX;;EACD,YAAIH,CAAC,CAACxD,IAAF,KAAW,OAAf,EAAwB;EACtB4D,UAAAA,OAAO;EACR;;EACDZ,QAAAA,WAAW;EACZ;;EACDjC,MAAAA,QAAQ,CAACmC,GAAD,EAAM,MAAN,EAAcQ,OAAd,CAAR;EACA3C,MAAAA,QAAQ,CAACmC,GAAD,EAAM,OAAN,EAAeQ,OAAf,CAAR;EAEAzE,MAAAA,KAAK,IAAIiE,GAAG,CAACW,YAAJ,CAAiB,KAAjB,EAAwBX,GAAG,CAACzD,YAAJ,CAAiB,KAAjB,CAAxB,CAAT;EACD,KA9ED;EA+ED,GAlGD;EAoGA,GAAC2C,UAAD,IAAeM,UAAU,CAAC;EACxBT,IAAAA,SAAS,CAACI,OAAV,CAAkB,OAAlB;EACD,GAFwB,CAAzB;EAIA,GAACF,WAAD,IAAgBO,UAAU,CAAC;EACzBT,IAAAA,SAAS,CAACI,OAAV,CAAkB,QAAlB;EACD,GAFyB,CAA1B;EAIA,SAAOJ,SAAP;EACD;;;;;;;;;"}